# Task Service

Task Service — это простой RESTful API на Go для управления задачами с асинхронной обработкой статусов. Все данные хранятся в памяти, сторонние сервисы не используются.

## Использованные инструменты и фреймворки

- **Go (Golang)** — основной язык программирования, версия 1.24+
- **net/http** — стандартная библиотека Go для реализации HTTP-сервера и роутинга
- **encoding/json** — стандартная библиотека для работы с JSON
- **sync** — стандартная библиотека для потокобезопасной работы с in-memory хранилищем
- **Docker** — контейнеризация и удобный запуск сервиса

В проекте не используются сторонние фреймворки и библиотеки, только стандартная библиотека Go.

## Возможности

- Создание задачи
- Получение всех задач
- Получение задачи по ID
- Удаление задачи
- Асинхронное изменение статусов задачи (`Pending` → `In_progress` → `Done`)

## Быстрый старт

### Сборка и запуск

```sh
go build -o task-service ./cmd/task-service/main.go
./task-service
```
или с помощью Docker:

```sh
docker build -t task-service .
docker run -p 8080:8080 task-service
```

После запуска сервис будет доступен на http://localhost:8080

## Описание API

### Создать задачу

**POST** `/task`

**Пример запроса:**
```json
{
    "description": "Описание задачи"
}
```

**Пример ответа:**
```json
{
    "id": 1,
    "status": "Pending",
    "createdAt": "2025-06-25T15:32:19.220349361+05:00",
    "description": "Описание задачи"
}
```

---

### Получить все задачи

**GET** `/task`

**Пример ответа:**
```json
[
    {
        "id": 2,
        "status": "Pending",
        "createdAt": "2025-06-25T15:40:18.863444628+05:00",
        "startedAt": "0001-01-01T00:00:00Z",
        "completedAt": "0001-01-01T00:00:00Z",
        "description": "Другая задача"
    },
    {
        "id": 1,
        "status": "In_progress",
        "createdAt": "2025-06-25T15:40:04.438246667+05:00",
        "startedAt": "2025-06-25T15:40:14.448513997+05:00",
        "completedAt": "0001-01-01T00:00:00Z",
        "description": "Описание задачи"
    }
]
```

---

### Получить задачу по ID

**GET** `/task/{id}`

**Пример ответа:**
```json
{
    "id": 1,
    "status": "In_progress",
    "createdAt": "2025-06-25T15:40:04.438246667+05:00",
    "startedAt": "2025-06-25T15:40:14.448513997+05:00",
    "completedAt": "0001-01-01T00:00:00Z",
    "description": "Описание задачи"
}
```

---

### Удалить задачу

**DELETE** `/task/{id}`

**Пример ответа:**
```
HTTP/1.1 200 OK
```

---

## Асинхронная обработка статусов

- После создания задача получает статус `Pending`.
- Через 10 секунд статус меняется на `In_progress`.
- Через 3 минуты — на `Done`.

## Ошибки

- 404 Not Found — задача не найдена
- 500 Internal Server Error — внутренняя ошибка сервиса

## Переменные окружения

- `PORT` — порт для запуска сервиса (по умолчанию 8080)

## Структура проекта

- `cmd/main.go` — точка входа
- `internal/handler` — HTTP-обработчики
- `internal/service` — бизнес-логика
- `internal/repository` — in-memory база и репозиторий
- `internal/custom_errors` — кастомные ошибки
